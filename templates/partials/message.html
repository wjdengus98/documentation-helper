<div class="flex gap-4 message-enter">
    <div class="w-10 h-10 rounded-2xl bg-gradient-to-br from-emerald-500 to-cyan-500 flex-shrink-0 flex items-center justify-center shadow-lg shadow-emerald-500/20">
        <svg class="w-5 h-5 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"></path>
        </svg>
    </div>
    <div class="flex-1 pt-1">
        <div class="bg-dark-card border border-dark-border rounded-2xl rounded-tl-md px-5 py-4 shadow-xl shadow-black/20">
            <div class="text-gray-300 leading-relaxed prose prose-invert prose-sm max-w-none prose-p:my-2 prose-headings:text-gray-200 prose-code:text-emerald-400 prose-code:bg-dark-hover prose-code:px-1.5 prose-code:py-0.5 prose-code:rounded prose-pre:bg-dark-bg prose-pre:border prose-pre:border-dark-border">
                {{ content | replace('\n', '<br>') | safe }}
            </div>

            {% if sources %}
            <details class="mt-4 pt-4 border-t border-dark-border/50">
                <summary class="text-xs text-gray-500 hover:text-emerald-400 transition-colors flex items-center gap-2 font-medium">
                    <svg class="w-4 h-4 transition-transform duration-200" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
                    </svg>
                    <span>Sources ({{ sources | length }})</span>
                </summary>
                <ul class="mt-3 space-y-2">
                    {% for source in sources %}
                    <li class="flex items-start gap-2 group">
                        <svg class="w-3.5 h-3.5 text-emerald-500/50 mt-0.5 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1"></path>
                        </svg>
                        <a href="{{ source }}" target="_blank" rel="noopener" class="text-xs text-gray-500 hover:text-emerald-400 transition-colors break-all leading-relaxed">
                            {{ source }}
                        </a>
                    </li>
                    {% endfor %}
                </ul>
            </details>
            {% endif %}
        </div>
    </div>
</div>
